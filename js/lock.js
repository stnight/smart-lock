var G,GConfig,LockApp;G=new MutationObserver(function(e){e.forEach(function(e){var t;return"close"===e.attributeName&&e.target.classList.contains("rtr")===!1&&(t=document.querySelector(".sl-dialog"),t.classList.add("rtr"),t.remove(),LockApp.reLock()),null!==e.attributeName&&null===e.target.offsetParent&&"close"!==e.attributeName&&"class"!==e.attributeName&&"open"!==e.attributeName&&e.target.classList.contains("rtr")===!1&&(t=document.querySelector(".sl-dialog"),t.classList.add("rtr"),t.remove(),LockApp.reLock()),"class"===e.attributeName&&"sl-dialog"===e.oldValue&&e.target.classList.contains("rtr")===!1&&(e.target.classList.contains("rtr"),e.target.classList.add("rtr"),t=document.querySelector("dialog.rtr"),t.remove(),LockApp.reLock()),0!==e.removedNodes.length&&"sl-dialog"===e.removedNodes[0].className?LockApp.reLock():void 0})}),GConfig={attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,subtree:!0},LockApp={chRt:chrome.runtime,chSt:chrome.storage.sync,isLocked:!1,isDialogOpened:!1,hint:null,init:function(){this.chSt.get(null,function(e){return LockApp.hint="undefined"==typeof e.hint?"":e.hint}),this.chRt.sendMessage({cmd:"check-lock"},function(e){return e.reply===!0?(LockApp.isLocked=!0,LockApp.chSt.get(null,function(e){return""!==e.userMessage||null!==e.userMessage||e.userMessage.length>0?LockApp.lockTab(e.userMessage,e.persistent):LockApp.lockTab(null,e.persistent)})):void 0})},noPassword:function(){var e,t,n,o,c;return e=document.querySelector("body"),t=document.createElement("dialog"),t.classList.add("sl-dialog","no-pass"),n=document.createElement("h3"),n.textContent="PLEASE PROVIDE A PASSWORD",o=document.createElement("form"),o.setAttribute("id","slForm"),c=document.createElement("button"),c.setAttribute("id","closeDialog"),c.textContent="OKAY",o.appendChild(c),t.appendChild(n),t.appendChild(o),e.appendChild(t),t.showModal(),this.noPwdFunction()},noPwdFunction:function(){var e,t;return e=document.querySelector("dialog.sl-dialog"),t=document.querySelector(".sl-dialog form"),t.addEventListener("submit",function(e){return e.preventDefault(),LockApp.chRt.sendMessage({cmd:"all-no-password"},function(e){return!0})})},lockTab:function(e,t){var n,o,c,r,s,a,d,i,l,u,p,m,h,L;return null==e&&(e=null),null==t&&(t=null),n=document.querySelector("body"),c=document.createElement("dialog"),c.classList.add("sl-dialog"),r=document.createElement("h3"),r.textContent="YOUR BROWSER IS LOCKED",p=document.createElement("h4"),p.textContent=e,a=document.createElement("form"),m=document.createElement("input"),d=document.createElement("button"),s=document.createElement("label"),h=document.createElement("div"),L=document.createElement("div"),h.classList.add("row"),L.classList.add("row"),o=document.createElement("div"),o.classList.add("clear"),s.classList.add("error","row"),a.setAttribute("id","slForm"),m.setAttribute("type","password"),m.setAttribute("placeholder","Your Password"),m.setAttribute("required","required"),m.classList.add("sl-password","column","two-third"),d.textContent="UNLOCK",d.classList.add("column","one-third"),h.appendChild(m),h.appendChild(d),h.appendChild(o),i=document.createElement("label"),l=document.createElement("a"),u=document.createElement("span"),l.setAttribute("id","hintLink"),l.setAttribute("href","#"),l.textContent="Hint:",u.setAttribute("id","hintText"),i.setAttribute("id","hintLabel"),i.appendChild(l),i.appendChild(u),L.appendChild(i),a.appendChild(h),a.appendChild(s),a.appendChild(L),c.appendChild(r),c.appendChild(p),c.appendChild(a),n.appendChild(c),c.showModal(),this.formFunction(),"on"===t?this.g():void 0},formFunction:function(){var e,t,n,o;e=document.querySelector("#slForm"),o=document.querySelector("input[type=password]"),t=document.querySelector("a#hintLink"),n=document.querySelector("span#hintText"),e.addEventListener("submit",function(e){e.preventDefault(),LockApp.chRt.sendMessage({cmd:"validate-password",password:o.value},function(e){return console.log(e),LockApp.checkAuth(e.reply)})}),t.addEventListener("click",function(e){e.preventDefault(),n.textContent=" "+LockApp.hint})},checkAuth:function(e){var t;t=document.querySelector("label.error"),e===!1&&(t.textContent="Your Password Is Incorrect")},unlockTab:function(){var e;return this.isLocked=!1,this.isDialogOpened=!1,e=document.querySelector("dialog.sl-dialog"),e.classList.add("rtr"),e.close(),e.remove()},reLock:function(){return this.isLocked=!1,this.isDialogOpened=!1,this.chRt.sendMessage({cmd:"lock-browser"},function(e){return!0})},g:function(){var e;e=document.querySelector("body"),G.observe(e,GConfig)},ug:function(){G.disconnect()}},document.onreadystatechange=function(){switch(document.readyState){case"interactive":return LockApp.init()}},LockApp.chRt.onConnect.addListener(function(e){return!0}),document.addEventListener("keyup",function(e){return e.ctrlKey&&81===e.keyCode&&LockApp.isDialogOpened===!1?(LockApp.isDialogOpened=!0,LockApp.chRt.sendMessage({cmd:"lock-browser"},function(e){return!0})):void 0},!1),LockApp.chRt.onMessage.addListener(function(e,t,n){return"lock-everything"===e.cmd&&LockApp.isLocked===!1&&(LockApp.isLocked=!0,LockApp.chSt.get(null,function(e){return""!==e.userMessage||null!==e.userMessage||e.userMessage.length>0?LockApp.lockTab(e.userMessage,e.persistent):LockApp.lockTab()})),"unlock-attempt"===e.cmd&&(e.result===!1?LockApp.checkAuth(e.result):LockApp.unlockTab()),"no-password"===e.cmd&&LockApp.noPassword(),"unlock-all"===e.cmd?LockApp.unlockTab():void 0});